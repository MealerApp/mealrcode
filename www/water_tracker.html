<div class="water_glass"><a href="#" onclick="addCount();"><img src="img/glass.png" width='60%'></a></div>
<div class="water_content">
  <h2 class="glass_count"><span id='count'></span>/8</h2>
  <h1>Glasses Today</h1>
</div>
<script>
  var currentCount = currentUser.get('water_count');
  
  $('#count').html(currentCount);
  function addCount() {
    currentCount += 1;  
    if (currentCount === 8){  
      currentUser.addUnique('badges', 'u1Gh44zpf3'); // winning a badge
      
    	var r = confirm("You just drank 8 glasses of water! Click OK to redeem your badge.");
    	submitBadgePost();
  		if (r==true) {
  		  $('#mainOutlet').load('redeem.html');
  		}
    }
    else {
     
      currentUser.increment('water_count', 1);
    }
    $('#count').html(currentCount);
    Parse.User.current().save();

  }

  function submitBadgePost() {
    var Post = Parse.Object.extend("Post");          
    var post = new Post();
    post.set("type",'badge');
    var badgePost = currentUser.getUsername() + " just won the water badge"; 
    console.log(badgePost);
    


  }

  </script>
